<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Scrummer â€” Coach</title>

<link href="css/style.css?v=3" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>

<style>
.tabBar{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 14px}
.tabBtn{border-radius:14px;padding:10px 14px;font-weight:650;cursor:pointer;border:1px solid var(--border);background:var(--bg-soft);color:var(--text-main);transition:.12s}
.tabBtn:hover{transform:translateY(-1px)}
.tabBtn.active{background:rgba(99,102,241,.95);color:#fff;border-color:rgba(99,102,241,.55);box-shadow:0 10px 24px rgba(99,102,241,.18)}
.tabPanel.hidden{display:none}

/* Sprint History Table */
.historyWrap{margin-top:14px}
.historyTop{display:flex;justify-content:space-between;align-items:flex-end;gap:12px;flex-wrap:wrap}
.historyActions{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.historyTable{width:100%;border-collapse:separate;border-spacing:0;border-radius:14px;border:1px solid var(--border);background:var(--bg-soft);overflow:hidden}
.historyTable th,.historyTable td{padding:10px;border-bottom:1px solid var(--border-soft);white-space:nowrap}
.historyTable thead th{font-size:12px;color:var(--text-muted);font-weight:750;background:color-mix(in oklab,var(--bg-soft) 70%,rgba(99,102,241,.05))}
.historyTable tbody tr:last-child td{border-bottom:none}
.histNum{width:90px}
.histSprint{font-weight:800}
.histAutoPill{display:inline-flex;align-items:center;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:var(--bg-panel);font-size:11px;font-weight:700;margin-left:6px}
.fileInput{display:none}
</style>
</head>

<body data-page="coach">
<div class="appShell">

<!-- SIDENAV -->
<aside class="sideNav">
<div class="sideBrand">
<div class="brandMark"><span>S</span></div>
<div>
<div class="brandName">SCRUMMER</div>
<div class="brandTag">Gamified Scrum OS</div>
</div>
</div>

<nav class="nav">
<a class="navlink" href="index.html">ğŸš€ Plan</a>
<a class="navlink active" href="coach.html">ğŸ¤– Coach</a>
<a class="navlink" href="Gamerules.html">ğŸ® Game Rules</a>
<a class="navlink" href="accounts.html">ğŸ” Account</a>
</nav>

<div class="xpWidget">
<div class="xpTop">
<div>
<div class="lvl" id="xpLevel">Level 1</div>
<div class="title" id="xpTitle">Rookie</div>
</div>
<div id="moodBadge">ğŸ† Calm</div>
</div>
<div class="xpBar"><div class="xpFill" id="xpFill"></div></div>
<div class="xpMeta">
<span id="xpText">0 / 300 XP</span>
<span id="streakText">ğŸ§Š streak reset</span>
</div>
</div>

<button class="themeToggle" id="themeToggle" type="button">
Theme: <span id="themeMode">Light</span>
</button>
</aside>

<!-- MAIN -->
<main class="main">

<div class="tabBar">
<button class="tabBtn active" data-tab="insights">Insights</button>
<button class="tabBtn" data-tab="health">Health</button>
<button class="tabBtn" data-tab="actions">Actions</button>
<button class="tabBtn" data-tab="copilot">Copilot</button>
</div>

<!-- ================== INSIGHTS ================== -->
<section class="tabPanel" id="panel-insights">
<div class="sectionCard">
<h1 class="sectionTitle">Sprint Intelligence</h1>
<p class="sectionSub">Risk, confidence, and capacity signals for this sprint.</p>
</div>
</section>

<!-- ================== HEALTH ================== -->
<section class="tabPanel hidden" id="panel-health">
<div class="sectionCard">
<h1 class="sectionTitle">Sprint Health Dashboard</h1>
<p class="sectionSub">Executive view: trends and stability â€” without blame.</p>

<!-- ================== SPRINT HISTORY TABLE ================== -->
<div class="info-banner historyWrap">

<div class="historyTop">
<div>
<div class="kvKey">Sprint History (Last 6 sprints)</div>
<div class="mutedText" style="margin-top:6px;">
Fill this table to unlock velocity trend, predictability, disruption and capacity metrics.
</div>
</div>

<div class="historyActions">
<button class="btnGhost" id="hist_autofillBtn" type="button">âœ¨ Auto-fill from Plan</button>
<button class="btnGhost" id="hist_demoBtn" type="button">ğŸ§ª Load Demo Data</button>
<button class="btnPrimary" id="hist_saveBtn" type="button">Save</button>
<button class="btnGhost" id="hist_resetBtn" type="button">Reset</button>

<input class="fileInput" id="hist_csvInput" type="file" accept=".csv,text/csv"/>
<button class="btnGhost" id="hist_uploadCsvBtn" type="button">Upload CSV</button>
<button class="btnGhost" id="hist_downloadTplBtn" type="button">Download Template</button>
</div>
</div>

<div style="overflow:auto;margin-top:12px;">
<table class="historyTable">
<thead>
<tr>
<th align="left">Sprint</th>
<th align="right">Forecast Capacity</th>
<th align="right">Actual Capacity</th>
<th align="right">Committed</th>
<th align="right">Completed</th>
<th align="right">Added (mid)</th>
<th align="right">Removed (mid)</th>
<th align="right">Sick Leave</th>
</tr>
</thead>
<tbody id="hist_rows">
<!-- Rows generated by coach-history.js -->
</tbody>
</table>
</div>

<div class="mutedText" id="hist_status" style="margin-top:10px;">
No sprint history yet. Use Demo or Auto-fill.
</div>

</div>
<!-- ================== /SPRINT HISTORY ================== -->

</div>
</section>

<!-- ================== ACTIONS ================== -->
<section class="tabPanel hidden" id="panel-actions">
<div class="sectionCard">
<h1 class="sectionTitle">Recommended Actions</h1>
</div>
</section>

<!-- ================== COPILOT ================== -->
<section class="tabPanel hidden" id="panel-copilot">
<div class="sectionCard">
<h1 class="sectionTitle">AI Ceremony Copilot</h1>
</div>
</section>

</main>
</div>

<script src="js/theme.js"></script>
<script src="js/xp.js"></script>
<script src="js/coach.js"></script>

<!-- NEW: Sprint history logic -->
<script src="js/coach-history.js"></script>

</body>
</html>
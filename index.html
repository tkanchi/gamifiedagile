<!DOCTYPE html>
<html data-theme="light" lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width,initial-scale=1" name="viewport" />
  <title>Scrummer â€” Plan</title>

  <link href="css/style.css?v=7" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>

</head>

<body data-page="plan">
<div class="appShell">

  <aside class="sideNav">
    <div class="sideBrand">
      <div class="brandMark"><span>S</span></div>
      <div>
        <div class="brandName">SCRUMMER</div>
        <div class="brandTag">Gamified Scrum OS</div>
      </div>
    </div>

    <nav class="nav">
      <a class="navlink active" href="index.html">ğŸš€ Plan</a>
      <a class="navlink" href="coach.html">ğŸ¤– Coach</a>
      <a class="navlink" href="Gamerules.html">ğŸ® Game Rules</a>
      <a class="navlink" href="accounts.html">ğŸ” Account</a>
    </nav>

    <div class="xpWidget">
      <div class="xpTop">
        <div>
          <div class="lvl" id="xpLevel">Level 1</div>
          <div class="title" id="xpTitle">Rookie</div>
        </div>
        <div id="moodBadge">ğŸ† Calm</div>
      </div>
      <div class="xpBar"><div class="xpFill" id="xpFill"></div></div>
      <div class="xpMeta">
        <span id="xpText">0 / 300 XP</span>
        <span id="streakText">ğŸ§Š streak reset</span>
      </div>
    </div>

    <div class="themeBlock">
      <div class="mutedText" style="margin-bottom:6px;">ğŸ® Theme</div>
      <select class="fun-input" id="themeSelect">
        <option value="light">ğŸŒ¤ï¸ Light</option>
        <option value="neon">âš¡ Neon Arena</option>
        <option value="cyber">ğŸƒ Mint Pop</option>
        <option value="retro">ğŸ² Retro Arcade</option>
      </select>
    </div>
  </aside>

  <main class="main">

    <!-- ================= SETUP ================= -->
    <section class="sectionCard">
      <div class="sectionHeaderRow">
        <div>
          <h1 class="sectionTitle">Enter Sprint History</h1>
          <p class="sectionSub">Enter these once. Forecast updates below when you click Save.</p>
        </div>
        <button class="btnStage btnStage-next" id="saveBtn" type="button">Save</button>
      </div>

      <div class="info-banner">
        <strong>Tip:</strong> Accurate history = better confidence + fewer surprises.
      </div>

      <div class="fieldGrid" style="margin-top:14px;">
        <div>
          <div class="kvKey">Sprint length (working days)</div>
          <input class="fun-input numSm int3" id="setup_sprintDays" type="number" min="1" max="999" placeholder="10" />
        </div>

        <div>
          <div class="kvKey">Team members</div>
          <input class="fun-input numSm int3" id="setup_teamMembers" type="number" min="1" max="999" placeholder="7" />
        </div>

        <div>
          <div class="kvKey">Leave days (total person-days)</div>
          <input class="fun-input numSm int3" id="setup_leaveDays" type="number" min="0" max="999" placeholder="0" />
        </div>

        <div>
          <div class="kvKey">Committed story points</div>
          <input class="fun-input numSm int3" id="setup_committedSP" type="number" min="0" max="999" placeholder="40" />
        </div>
      </div>

      <div class="info-banner" style="margin-top:14px;">
        <div class="kvKey">Last 3 sprint velocities (completed SP)</div>
        <div class="mutedText">Used for Velocity forecast + confidence. Presets wonâ€™t fill these.</div>

        <div class="velocityRow" style="margin-top:12px;">
          <div class="velItem">
            <div class="velLabel">Sprint N-1</div>
            <input class="fun-input numSm int3" id="setup_v1" type="number" min="0" max="999" placeholder="36" />
          </div>
          <div class="velItem">
            <div class="velLabel">Sprint N-2</div>
            <input class="fun-input numSm int3" id="setup_v2" type="number" min="0" max="999" placeholder="41" />
          </div>
          <div class="velItem">
            <div class="velLabel">Sprint N-3</div>
            <input class="fun-input numSm int3" id="setup_v3" type="number" min="0" max="999" placeholder="38" />
          </div>
        </div>
      </div>

      <div style="margin-top:14px;">
        <div class="kvKey">Quick presets</div>
        <div class="btnRow" style="margin-top:8px;">
          <button class="btnGhost" id="setup_presetExcellent" type="button">ğŸŸ¢ Excellent</button>
          <button class="btnGhost" id="setup_presetNormal" type="button">ğŸŸ¡ Normal</button>
          <button class="btnGhost" id="setup_presetRisky" type="button">ğŸ”´ Risky</button>
        </div>
        <div class="mutedText" style="margin-top:8px;">Presets fill only Sprint/Team/Leaves/Committed. Velocities are always manual.</div>
      </div>

      <div class="info-banner" id="setup_toast" style="display:none; margin-top:14px; border-left:4px solid color-mix(in oklab, var(--accent) 55%, transparent);">
        â€”
      </div>

      <div class="info-banner" style="margin-top:14px;">
        <div class="kvKey">Save status</div>
        <div class="mutedText" id="setup_saveStatus">Not saved yet.</div>
      </div>
    </section>

    <!-- ================= FORECAST ================= -->
    <section class="sectionCard" style="margin-top:16px;" id="forecastCard">
      <div class="forecastHeader">
        <div>
          <h2 class="sectionTitle" style="font-size:22px;">Forecast</h2>
          <p class="sectionSub" style="margin-top:4px;">Updates when you click Save. Velocity auto-runs by default.</p>
        </div>

        <div class="forecastMeta">
          <span class="confidenceBadge" id="confidenceBadge">Confidence: â€”</span>
          <span class="miniTag" id="overcommitTag" style="display:none;">âš  Over-commit</span>
        </div>
      </div>

      <div class="info-banner" style="margin-top:10px;">
        <div class="kvKey">Forecast Mode</div>
        <select class="fun-input" id="forecast_forecastMode" style="max-width:420px;">
          <option value="velocity" selected>ğŸ”µ Velocity</option>
          <option value="capacity">ğŸŸ¢ Capacity</option>
        </select>
        <div class="mutedText" style="margin-top:6px;">
          Velocity shows results immediately using your last 3 sprint velocities.
        </div>
      </div>

      <!-- Velocity -->
      <div class="info-banner" id="forecast_velocityBox" style="margin-top:14px;">
        <div class="kvKey">ğŸ”µ Velocity Forecast</div>

        <div class="toggleRow" style="margin-top:10px;">
          <input id="forecast_velOverride" type="checkbox" />
          <label for="forecast_velOverride">Override velocities for this forecast</label>
        </div>

        <div class="velocityRow" style="margin-top:12px;">
          <div class="velItem">
            <div class="velLabel">N-1</div>
            <input class="fun-input numSm int3" id="forecast_velN1" type="number" min="0" max="999" disabled />
          </div>
          <div class="velItem">
            <div class="velLabel">N-2</div>
            <input class="fun-input numSm int3" id="forecast_velN2" type="number" min="0" max="999" disabled />
          </div>
          <div class="velItem">
            <div class="velLabel">N-3</div>
            <input class="fun-input numSm int3" id="forecast_velN3" type="number" min="0" max="999" disabled />
          </div>
        </div>

        <div class="formulaBox" id="velocityFormulaBox" style="margin-top:12px;">
          <div class="kvKey">ğŸ“˜ Velocity Formula</div>
          <div class="mutedText">(Sprint N + Sprint N-1 + Sprint N-2) / 3</div>
        </div>
      </div>

      <!-- Capacity -->
      <div class="info-banner" id="forecast_capacityBox" style="margin-top:14px; display:none;">
        <div class="kvKey">ğŸŸ¢ Capacity Forecast</div>

        <div class="fieldGrid3" style="margin-top:12px;">
          <div>
            <div class="velLabel">Focus Factor (0â€“1)</div>
            <input class="fun-input numSm" id="forecast_focusFactor" type="number" min="0" max="1" step="0.05" value="0.60" />
          </div>
          <div>
            <div class="velLabel">Leaves Weight (0â€“1)</div>
            <input class="fun-input numSm" id="forecast_weight" type="number" min="0" max="1" step="0.05" value="0.50" />
          </div>
          <div>
            <div class="velLabel">SP / Day (per member)</div>
            <input class="fun-input numSm" id="forecast_spPerDay" type="number" min="0" max="999" step="0.1" value="4.0" />
          </div>
        </div>

        <div class="formulaBox" id="capacityFormulaBox" style="margin-top:12px;">
          <div class="kvKey">ğŸ“˜ Forecast Formulas (Reference)</div>
          <div class="mutedText" style="line-height:1.7;">
            <b>1) Ideal Capacity (Days per person)</b><br/>
            Ideal = Sprint Days Ã— Focus Factor<br/><br/>
            <b>2) Total Ideal Capacity (Days)</b><br/>
            Total Ideal Days = Team Count Ã— Ideal<br/><br/>
            <b>3) Total Actual Capacity (Days)</b><br/>
            Total Actual Days = Total Ideal Days âˆ’ (Leaves Ã— Weight)<br/><br/>
            <b>4) Total Actual Capacity (SP)</b><br/>
            Forecast SP = max(0, Total Actual Days) Ã— SP/day
          </div>
        </div>
      </div>

      <!-- Results -->
      <div class="resultsWrap" id="resultsWrap" style="margin-top:14px;">
        <div class="resultsMain">
          <div class="resultLabel">Forecast</div>
          <div class="resultNumber" id="forecastNumber">â€”</div>
          <div class="resultSub" id="forecastSub">Save to generate forecast.</div>
        </div>

        <div class="resultsSide">
          <div class="miniStat">
            <div class="miniLabel">Committed</div>
            <div class="miniValue" id="committedValue">â€”</div>
          </div>
          <div class="miniStat">
            <div class="miniLabel">Delta (Committed âˆ’ Forecast)</div>
            <div class="miniValue" id="deltaValue">â€”</div>
          </div>
          <div class="miniStat">
            <div class="miniLabel">Over-commit Ratio</div>
            <div class="miniValue" id="overcommitRatio">â€”</div>
          </div>
        </div>
      </div>

      <div class="info-banner" id="forecast_warnBox" style="display:none; margin-top:12px;">
        <div class="kvKey">âš  Check Inputs</div>
        <div id="forecast_warnText" class="mutedText" style="margin-top:6px;"></div>
      </div>

    </section>

  </main>
</div>

<script src="js/theme.js"></script>
<script src="js/xp.js"></script>
<script src="js/plan.js"></script>
</body>
</html>